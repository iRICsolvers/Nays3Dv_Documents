[計算例 2] 密度の異なる流体の混合
=================================

Nays3dvを用いて立方体の中の密度の異なる流体が混合する様子を計算する。

--------------
計算格子の作成
--------------

計算格子の作成はNays3dv専用の格子生成ツールを用いる。 :numref:`03_02_koushi_1` 
で[Nays3dv用格子生成ツール]を選択し。[OK]をクリックする。

.. _03_02_koushi_1:

.. figure:: images/02/koushi_1.png
   :width: 400pt

   : 格子生成アルゴリズムの選択

下図の :numref:`03_02_koushi_2` で赤囲いの部分を設定する。 

.. _03_02_koushi_2:

.. figure:: images/02/koushi_2.png
   :width: 250pt

   : 格子生成: 計算領域

下図 :numref:`03_02_koushi_3` で赤囲いの部分を設定し、格子生成をクリックすると、格子が生成される。
( :numref:`03_02_koushi_4` ) 

.. _03_02_koushi_3:

.. figure:: images/02/koushi_3.png
   :width: 250pt

   : 格子生成: 初期水面形

.. _03_02_koushi_4:

.. figure:: images/02/koushi_4.png
   :width: 400pt

   : 格子生成の完了

--------------
計算条件の設定
--------------

メニューバーから[計算条件]→[設定]を選ぶと「計算条件」入力用のウィンドウが表示される :numref:`03_02_joken_1` 

.. _03_02_joken_1:

.. figure:: images/02/joken_1.png
   :width: 400pt

   : 計算条件：モデルパラメータ


「計算条件」ウィンドウ :numref:`03_02_joken_1` の「モデルパラメータ」は図の赤で囲った部分を設定する。
本計算は密度流なので、「密度流の計算」を[有り]に設定する。
流れの渦動粘性係数は前の計算例と同様に放物線分布とする。

.. _03_02_joken_2:

.. figure:: images/02/joken_2.png
   :width: 400pt

   : 計算条件：濃度の初期条件と境界条件

「計算条件」の「濃度の初期条件と境界条件」は :numref:`03_02_joken_2` のように設定する。
もともと真水（濃度=0)の立方体の半分に濃度=0.03の高密度液体(例えば塩水)を配置し、その後の液体の混合状況を
シミュレーションする。


.. _03_02_joken_3:

.. figure:: images/02/joken_3.png
   :width: 400pt

   : 計算条件：時間および繰り返し計算パラメーター


「計算条件」の「時間および繰り返し計算パラメーター」は :numref:`03_02_joken_3` のように設定する。
設定が終了したら[保存して終了]を押す。


------------
計算の実行
------------

.. _03_02_jikkou:

.. figure:: images/02/jikkou.png
   :width: 90%

   :計算実行中の画面

[計算]→[実行]を指定すると、:numref:`03_02_jikkou` のような画面が現れ計算が始まる。

.. _03_02_jikkou_1:

.. figure:: images/02/jikkou_1.png
   :width: 90%

   :計算の終了


計算が終了すると, :numref:`03_02_jikkou_1` のような表示がされる。


-------------------------
計算結果の表示
-------------------------

計算の終了後、[計算結果]→[新しい可視化ウィンドウ(3D)を開く]を選ぶことによって、可視化ウィンドウが現れる。

.. _03_02_kekka_1:

.. figure:: images/02/kekka_1.png
   :width: 450pt

   : 計算結果の表示(1)
 

「Ctrl」ボタンとマウス右ボタンを押しながらマウスを上下左右に動かすことによって、
3次元的な見え方が、また、マウスぼセンターダイヤを回すことにより、 :numref:`03_02_kekka_2` のような
拡大・縮小が可能となっている。

.. _03_02_kekka_2:

.. figure:: images/02/kekka_2.png
   :width: 450pt

   : 3D格子の回転・移動・拡大・縮小
 


^^^^^^^^^^^^^^^^^^^^^^
ベクトル表示の設定
^^^^^^^^^^^^^^^^^^^^^^

オブジェクトブラウザーで、[ベクトル]を右クリックして、[プロパティ]をクリックすると、
「ベクトル設定」ウィンドウ :numref:`03_02_kekka_3` が現れる。

.. _03_02_kekka_3:

.. figure:: images/02/kekka_3.png
   :width: 450pt

   : ベクトルの設定
 

:numref:`03_02_kekka_3` のようにベクトルに関する各パラメータを設定し、[OK]ボタンを押す。

^^^^^^^^^^^^^^^^^^^^^^^
等値面表示の設定
^^^^^^^^^^^^^^^^^^^^^^^

オブジェクトブラウザーで、[等値面]を右クリックして、[追加]をクリックすると、
「等値面設定」ウィンドウ :numref:`03_02_kekka_4` が現れる。 これを図のように設定する。

.. _03_02_kekka_4:

.. figure:: images/02/kekka_4.png
   :width: 200pt

   : 等値面の設定
 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
計算結果の表示およびアニメーション
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

「可視化ウィンドウ(3D)」 :numref:`03_02_kekka_5` でタイムバーをゼロに戻して、[アニメーション]→[開始/停止]で
計算結果をアニメーションで見ることが出来る。

.. _03_02_kekka_5:

.. figure:: images/02/kekka_5.png
   :width: 450pt

   : アニメーション
 

.. figure:: images/02/ex2.gif



アニメーションはiRICメインウィンドウ左上にあるプレイボタン等で操作も可能である。:numref:`03_02_kekka_6` 

.. _03_02_kekka_6:

.. figure:: images/02/kekka_6.png
   :width: 450pt

   : アニメーション
 
